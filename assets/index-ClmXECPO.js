const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthDialog-faLjwDkh.js","assets/firebase-vendor-BRal2sr7.js","assets/react-vendor-ZjqdYyzx.js","assets/rolldown-runtime-y2wrX6ue.js","assets/vendor-B131Y2xX.js","assets/ui-vendor-BsUxY6oW.js","assets/LeftPanel-uRkWecRJ.js","assets/RightPanel-DpplF059.js","assets/NearestLocations-UEF6vIP9.js"])))=>i.map(i=>d[i]);
import{n as e}from"./rolldown-runtime-y2wrX6ue.js";import{$ as t,A as n,B as r,C as i,D as a,E as o,F as s,G as c,H as l,I as u,J as d,K as f,L as p,M as m,N as h,O as g,P as _,Q as v,R as y,S as b,T as x,U as S,V as C,W as w,X as T,Y as E,Z as D,_ as O,at as k,b as ee,d as te,et as ne,f as re,g as A,h as ie,j,k as ae,l as oe,m as se,nt as ce,p as le,q as ue,rt as de,tt as fe,u as pe,v as M,w as me,x as N,y as he,z as ge}from"./react-vendor-ZjqdYyzx.js";import{n as _e,r as ve,t as ye}from"./vendor-B131Y2xX.js";import{a as be,c as xe,i as Se,l as Ce,n as we,o as Te,r as Ee,s as De,t as P}from"./firebase-vendor-BRal2sr7.js";import{n as F,t as Oe}from"./ui-vendor-BsUxY6oW.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var ke=de(),I=k(),L=T();function Ae(e){if(!e||typeof e!=`string`)return null;let t=e.lastIndexOf(`,`);if(t<=0)return null;let n=e.substring(0,t),r=e.substring(t+1).trim(),i=n.lastIndexOf(`,`);return i<=0?{street:n.trim(),cityState:r}:{street:n.substring(0,i).trim(),cityState:`${n.substring(i+1).trim()}, ${r}`}}function je(e){let t=Ae(e);return t?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(`div`,{children:t.street}),(0,L.jsx)(`div`,{style:{whiteSpace:`nowrap`},children:t.cityState})]}):(0,L.jsx)(`div`,{children:e})}var R=({children:e})=>(0,L.jsx)(`div`,{style:{fontSize:`12px`,color:`#666`,textTransform:`uppercase`,letterSpacing:`0.5px`,fontWeight:`500`,marginBottom:`4px`},children:e});const Me=(0,I.memo)(function({pin:e,isSelected:t,onSelect:n,onClose:r,onOpenDetails:i}){let[a,o]=[40,64],[s,c,l]=[.8,.9,1],u=(0,L.jsx)(`img`,{src:`/pokeball-pin.png`,alt:`Pokemon Vending Machine`,style:{width:`${a}px`,height:`${o}px`,cursor:`pointer`,transition:`transform 0.2s ease`,transform:t?`scale(${l})`:`scale(${s})`},onMouseEnter:e=>{e.currentTarget.style.transform=`scale(${c})`},onMouseLeave:e=>{e.currentTarget.style.transform=t?`scale(${l})`:`scale(${s})`}});return(0,L.jsxs)(v,{position:e.location,onClick:n,children:[u,t&&(0,L.jsx)(ne,{position:e.location,onCloseClick:r,pixelOffset:[0,-o+2],headerContent:(0,L.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,L.jsx)(`img`,{src:`/pokeball-pin.png`,alt:`Pokeball`,style:{width:`16px`,filter:`drop-shadow(0 1px 1px rgba(0, 0, 0, 0.3))`,margin:`0 2px`}}),(0,L.jsx)(`h3`,{style:{margin:0,fontSize:`16px`,fontWeight:`600`,color:`#1a1a1a`},children:`Pokemon Vending Machine`})]}),children:(0,L.jsxs)(`div`,{style:{maxWidth:`280px`},children:[e.retailer&&(0,L.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,padding:`8px 0`,borderBottom:`1px solid #f0f0f0`},children:[(0,L.jsx)(_,{className:`h-5 w-5 text-gray-600 flex-shrink-0`}),(0,L.jsxs)(`div`,{children:[(0,L.jsx)(R,{children:`Store`}),(0,L.jsx)(`div`,{style:{fontSize:`14px`,color:`#1a1a1a`,fontWeight:`600`},children:e.retailer})]})]}),e.address&&(0,L.jsxs)(`div`,{style:{display:`flex`,alignItems:`start`,gap:`8px`,padding:`8px 0`},children:[(0,L.jsx)(C,{className:`h-5 w-5 text-gray-600 flex-shrink-0 mt-0.5`}),(0,L.jsxs)(`div`,{children:[(0,L.jsx)(R,{children:`Location`}),(0,L.jsx)(`div`,{style:{fontSize:`14px`,color:`#1a1a1a`,fontWeight:`400`},children:je(e.address)})]})]}),(0,L.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`,paddingTop:`12px`,borderTop:`1px solid #f0f0f0`},children:[(0,L.jsxs)(`a`,{href:`https://www.google.com/maps/dir/?api=1&destination=${e.location.lat},${e.location.lng}`,target:`_blank`,rel:`noopener noreferrer`,style:{display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`6px`,padding:`8px 12px`,backgroundColor:`#4285f4`,color:`white`,textDecoration:`none`,borderRadius:`6px`,fontSize:`14px`,fontWeight:`600`,transition:`background-color 0.2s`,cursor:`pointer`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=`#3367d6`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=`#4285f4`},children:[(0,L.jsx)(p,{className:`h-4 w-4`}),(0,L.jsx)(`span`,{children:`Get Directions`})]}),i&&(0,L.jsxs)(`button`,{onClick:()=>i(e.id),style:{display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`6px`,padding:`8px 12px`,backgroundColor:`#10b981`,color:`white`,border:`none`,borderRadius:`6px`,fontSize:`14px`,fontWeight:`600`,transition:`background-color 0.2s`,cursor:`pointer`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=`#059669`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=`#10b981`},children:[(0,L.jsx)(`span`,{children:`More Details`}),(0,L.jsx)(d,{className:`h-4 w-4`})]})]})]})})]})}),Ne=(0,I.memo)(function({position:e,pulseTrigger:t=0}){let[n,r]=(0,I.useState)(!1);return(0,I.useEffect)(()=>{if(t>0){r(!0);let e=setTimeout(()=>r(!1),800);return()=>clearTimeout(e)}},[t]),(0,L.jsx)(v,{position:e,zIndex:1e3,children:(0,L.jsxs)(`div`,{style:{position:`relative`,width:`20px`,height:`20px`},children:[(0,L.jsx)(`div`,{style:{position:`absolute`,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`,width:`40px`,height:`40px`,borderRadius:`50%`,backgroundColor:`rgba(66, 133, 244, 0.2)`,animation:`pulse 2s infinite`}}),n&&(0,L.jsx)(`div`,{style:{position:`absolute`,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`,width:`16px`,height:`16px`,borderRadius:`50%`,backgroundColor:`rgba(66, 133, 244, 0.6)`,animation:`highlightPulse 0.8s ease-out`}}),(0,L.jsx)(`div`,{style:{position:`absolute`,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`,width:`16px`,height:`16px`,borderRadius:`50%`,backgroundColor:`#4285f4`,border:`3px solid white`,boxShadow:`0 2px 6px rgba(0,0,0,0.3)`,transition:`transform 0.3s ease-out`,...n&&{transform:`translate(-50%, -50%) scale(1.3)`}}})]})})});function Pe(e,t,n){let[r,i]=(0,I.useState)([]);return(0,I.useEffect)(()=>{if(!t||e.length===0){i(n<6?e.filter((e,t)=>t%10==0):n<8?e.filter((e,t)=>t%3==0):e);return}let r=e.filter(e=>{let{lat:n,lng:r}=e.location;return n>=t.south&&n<=t.north&&r>=t.west&&r<=t.east}),a=n<6?2e3:n<8?1e3:n<10?500:100;i(r.slice(0,a))},[e,t,n]),r}function Fe({center:e,zoom:t,onBoundsChanged:n,onZoomChanged:r,onCenterChanged:i}){let a=ce();return(0,I.useEffect)(()=>{a&&(a.panTo(e),a.setZoom(t))},[a,e,t]),(0,I.useEffect)(()=>{if(!a)return;let e=a.addListener(`bounds_changed`,()=>{let e=a.getBounds();e&&n({north:e.getNorthEast().lat(),south:e.getSouthWest().lat(),east:e.getNorthEast().lng(),west:e.getSouthWest().lng()})}),t=a.addListener(`zoom_changed`,()=>{let e=a.getZoom();e&&r(e)}),o=a.addListener(`center_changed`,()=>{let e=a.getCenter();e&&i({lat:e.lat(),lng:e.lng()})});return()=>{google.maps.event.removeListener(e),google.maps.event.removeListener(t),google.maps.event.removeListener(o)}},[a,n,r,i]),null}function Ie({apiKey:e,center:t,zoom:n,pins:r,pinsLoading:i,userLocation:a,colorScheme:o,onZoomChange:s,onVisiblePinsChange:c,onCenterChange:l,onOpenDetails:u,selectedPinId:d,onPinSelectionChange:f,locationPulseTrigger:p=0}){let[m,h]=(0,I.useState)(null),[g,_]=(0,I.useState)(null),[v,y]=(0,I.useState)(n),b=Pe(r,g,v);(0,I.useEffect)(()=>{d!==void 0&&d!==m&&h(d)},[d,m]);let x=(0,I.useCallback)(e=>{h(e),f?.(e)},[f]),S=(0,I.useCallback)(()=>{h(null),f?.(null)},[f]),C=(0,I.useCallback)(e=>{_(e)},[]),w=(0,I.useCallback)(e=>{y(e),s?.(e)},[s]),T=(0,I.useCallback)(e=>{l?.(e)},[l]);return(0,I.useEffect)(()=>{c?.(b.length)},[b.length,c]),(0,L.jsx)(D,{apiKey:e,children:(0,L.jsx)(`div`,{style:{height:`100%`,width:`100%`,flex:1,position:`relative`},children:(0,L.jsxs)(fe,{defaultCenter:t,defaultZoom:n,gestureHandling:`greedy`,mapId:`e28565e73aadc71c448f1ec2`,colorScheme:o,disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,children:[(0,L.jsx)(Fe,{center:t,zoom:n,onBoundsChanged:C,onZoomChanged:w,onCenterChanged:T}),a&&(0,L.jsx)(Ne,{position:a,pulseTrigger:p}),!i&&b.map(e=>(0,L.jsx)(Me,{pin:e,isSelected:m===e.id,onSelect:()=>x(e.id),onClose:S,onOpenDetails:u},e.id))]})})})}function z(...e){return ye(ve(e))}var Le=_e(`inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0`,{variants:{variant:{default:`bg-primary text-primary-foreground hover:bg-primary/90`,destructive:`bg-destructive text-destructive-foreground hover:bg-destructive/90`,outline:`border border-input bg-background hover:bg-accent hover:text-accent-foreground`,secondary:`bg-secondary text-secondary-foreground hover:bg-secondary/80`,ghost:`hover:bg-accent hover:text-accent-foreground`,link:`text-primary underline-offset-4 hover:underline`},size:{default:`h-10 px-4 py-2`,sm:`h-9 rounded-md px-3`,lg:`h-11 rounded-md px-8`,icon:`h-10 w-10`}},defaultVariants:{variant:`default`,size:`default`}}),B=I.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},a)=>(0,L.jsx)(r?g:`button`,{className:z(Le({variant:t,size:n,className:e})),ref:a,...i}));B.displayName=`Button`;var V=b,H=a,Re=ee,ze=I.forwardRef(({className:e,inset:t,children:n,...r},i)=>(0,L.jsxs)(o,{ref:i,className:z(`flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-3 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0`,t&&`pl-8`,e),...r,children:[n,(0,L.jsx)(d,{className:`ml-auto`})]}));ze.displayName=o.displayName;var Be=I.forwardRef(({className:e,...t},n)=>(0,L.jsx)(x,{ref:n,className:z(`z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]`,e),...t}));Be.displayName=x.displayName;var U=I.forwardRef(({className:e,sideOffset:t=4,...n},r)=>(0,L.jsx)(he,{children:(0,L.jsx)(se,{ref:r,sideOffset:t,className:z(`z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 pt-3 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]`,e),...n})}));U.displayName=se.displayName;var W=I.forwardRef(({className:e,inset:t,...n},r)=>(0,L.jsx)(A,{ref:r,className:z(`relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0`,t&&`pl-8`,e),...n}));W.displayName=A.displayName;var Ve=I.forwardRef(({className:e,children:t,checked:n,...r},i)=>(0,L.jsxs)(le,{ref:i,className:z(`relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50`,e),checked:n,...r,children:[(0,L.jsx)(`span`,{className:`absolute left-2 flex h-3.5 w-3.5 items-center justify-center`,children:(0,L.jsx)(O,{children:(0,L.jsx)(E,{className:`h-4 w-4`})})}),t]}));Ve.displayName=le.displayName;var G=I.forwardRef(({className:e,children:t,...n},r)=>(0,L.jsxs)(N,{ref:r,className:z(`relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50`,e),...n,children:[(0,L.jsx)(`span`,{className:`absolute left-2 flex h-3.5 w-3.5 items-center justify-center`,children:(0,L.jsx)(O,{children:(0,L.jsx)(E,{className:`h-4 w-4`})})}),t]}));G.displayName=N.displayName;var K=I.forwardRef(({className:e,inset:t,...n},r)=>(0,L.jsx)(M,{ref:r,className:z(`px-2 py-1.5 text-sm font-semibold`,t&&`pl-8`,e),...n}));K.displayName=M.displayName;var q=I.forwardRef(({className:e,...t},n)=>(0,L.jsx)(i,{ref:n,className:z(`-mx-1 my-1 h-px bg-muted`,e),...t}));q.displayName=i.displayName;var He=({className:e,...t})=>(0,L.jsx)(`span`,{className:z(`ml-auto text-xs tracking-widest opacity-60`,e),...t});He.displayName=`DropdownMenuShortcut`;var Ue=pe,J=te,Y=re,X=I.forwardRef(({className:e,sideOffset:t=4,...n},r)=>(0,L.jsx)(oe,{ref:r,sideOffset:t,className:z(`z-[1100] overflow-hidden rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-sm text-slate-100 shadow-lg animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]`,e),...n}));X.displayName=oe.displayName;var We=Ce({apiKey:`AIzaSyBUFOZMWuDn-zb-AGah1eSBK8RwzKQdLcc`,authDomain:`poke-vm-map.firebaseapp.com`,projectId:`poke-vm-map`,storageBucket:`poke-vm-map.firebasestorage.app`,messagingSenderId:`500588866760`,appId:`1:500588866760:web:bb7041737a2597c85bc9fd`,measurementId:`G-KR1E9ZTX5M`});const Z=Se(We);we(We);function Q(){let[e,t]=(0,I.useState)(null),[n,r]=(0,I.useState)(!0);return(0,I.useEffect)(()=>{let e=be(Z,e=>{t(e),r(!1)});return()=>e()},[]),{user:e,loading:n,signIn:async(e,t)=>De(Z,e,t),signUp:async(e,t)=>Ee(Z,e,t),signInAnon:async()=>Te(Z),signOut:async()=>xe(Z)}}var Ge=`modulepreload`,Ke=function(e){return`/poke-vm-map/`+e},qe={};const $=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=Ke(t,n),t in qe)return;qe[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:Ge,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[])e.status===`rejected`&&i(e.reason);return e().catch(i)})};var Je=(0,I.lazy)(()=>$(()=>import(`./AuthDialog-faLjwDkh.js`),__vite__mapDeps([0,1,2,3,4,5])).then(e=>({default:e.AuthDialog})));function Ye({onLocateUser:e,user:t,mapColorScheme:n,onMapColorSchemeChange:i,totalPins:a=0,visiblePins:o=0,currentZoom:u=5,mapCenter:d,userLocation:m,pins:g=[],onOpenNearestPanel:_,maxNearestLocations:v=25,maxNearestDistance:b=50}){let[x,S]=(0,I.useState)(!1),[C,w]=(0,I.useState)(!1),{signOut:T}=Q(),E=(e,t,n,r)=>{let i=(n-e)*Math.PI/180,a=(r-t)*Math.PI/180,o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},D=(()=>!m||g.length===0?[]:g.map(e=>{let t=E(m.lat,m.lng,e.location.lat,e.location.lng),n=t*.621371;return{pin:e,distance:n<1?t:n,unit:n<1?`km`:`mi`,distanceMiles:n}}).filter(e=>e.distanceMiles<=b).sort((e,t)=>e.distanceMiles-t.distanceMiles).slice(0,v).map(({pin:e,distance:t,unit:n})=>({pin:e,distance:t,unit:n})))(),O=async()=>{try{await T(),F.success(`Signed out successfully`,{id:`sign-out`})}catch{F.error(`Failed to sign out`,{id:`sign-out-error`})}},k=()=>{if(d){let e=`${d.lat.toFixed(6)}, ${d.lng.toFixed(6)}`;navigator.clipboard.writeText(e),F.success(`Coordinates copied!`,{id:`coords-copied`,description:e})}};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Ue,{delayDuration:300,disableHoverableContent:!1,children:(0,L.jsx)(`nav`,{className:`bg-slate-900 text-white shadow-md z-[1000] relative`,children:(0,L.jsxs)(`div`,{className:`flex justify-between items-center max-w-full px-3 sm:px-6 py-3`,children:[(0,L.jsxs)(`div`,{className:`flex items-center gap-3 sm:gap-6`,children:[(0,L.jsx)(`h1`,{className:`m-0 text-xl sm:text-2xl font-semibold text-white`,children:`PokeMap`}),a>0&&(0,L.jsx)(`div`,{className:`hidden lg:block h-8 w-px bg-slate-600`}),a>0&&(0,L.jsxs)(`div`,{className:`hidden lg:flex items-center gap-4 text-sm`,children:[d&&(0,L.jsxs)(J,{children:[(0,L.jsx)(Y,{asChild:!0,children:(0,L.jsxs)(`button`,{className:`flex items-center gap-2 text-slate-300 hover:text-white transition-colors min-h-[44px] px-2 -mx-2 rounded`,onClick:k,children:[(0,L.jsx)(c,{className:`h-4 w-4 flex-shrink-0`,strokeWidth:2}),(0,L.jsx)(`span`,{className:`font-mono text-xs`,children:(0,L.jsxs)(`span`,{className:`font-semibold text-white`,children:[d.lat.toFixed(4),`°,`,` `,d.lng.toFixed(4),`°`]})})]})}),(0,L.jsxs)(X,{side:`bottom`,children:[(0,L.jsx)(`p`,{className:`font-medium mb-1`,children:`Map Center`}),(0,L.jsxs)(`p`,{className:`text-xs text-slate-300`,children:[`Lat: `,d.lat.toFixed(6),`°`,` `,d.lat>=0?`N`:`S`]}),(0,L.jsxs)(`p`,{className:`text-xs text-slate-300`,children:[`Lng: `,d.lng.toFixed(6),`°`,` `,d.lng>=0?`E`:`W`]}),(0,L.jsx)(`p`,{className:`text-xs text-slate-400 mt-1.5`,children:`Click to copy coordinates`})]})]}),(0,L.jsx)(`div`,{className:`h-4 w-px bg-slate-600`}),(0,L.jsxs)(J,{children:[(0,L.jsx)(Y,{asChild:!0,children:(0,L.jsxs)(`div`,{className:`flex items-center gap-2 text-slate-300 min-h-[44px] px-2 -mx-2 rounded`,children:[(0,L.jsx)(ae,{className:`h-4 w-4 flex-shrink-0`,strokeWidth:2}),(0,L.jsx)(`span`,{children:(0,L.jsxs)(`span`,{className:`font-semibold text-white`,children:[Math.round(u),`x`]})})]})}),(0,L.jsxs)(X,{side:`bottom`,children:[(0,L.jsx)(`p`,{className:`font-medium mb-1`,children:`Map Zoom Level`}),(0,L.jsx)(`p`,{className:`text-xs text-slate-300`,children:u<5?`Continent view`:u<10?`State/Region view`:u<15?`City view`:`Street view`}),(0,L.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1.5`,children:[`Scale: 1-20 • Current: `,u]})]})]}),(0,L.jsx)(`div`,{className:`h-4 w-px bg-slate-600`}),(0,L.jsxs)(J,{children:[(0,L.jsx)(Y,{asChild:!0,children:(0,L.jsxs)(`div`,{className:`flex items-center gap-2 text-slate-300 min-h-[44px] px-2 -mx-2 rounded`,children:[(0,L.jsx)(r,{className:`h-4 w-4 flex-shrink-0`,strokeWidth:2}),(0,L.jsx)(`span`,{children:(0,L.jsx)(`span`,{className:`font-semibold text-white`,children:o.toLocaleString()})})]})}),(0,L.jsxs)(X,{side:`bottom`,children:[(0,L.jsx)(`p`,{className:`font-medium mb-1`,children:`Visible Locations`}),(0,L.jsx)(`p`,{className:`text-xs text-slate-300`,children:`${o.toLocaleString()} in current view`}),o<a&&(0,L.jsx)(`p`,{className:`text-xs text-slate-400 mt-1.5`,children:`Zoom out or pan to see more`})]})]}),D.length>0&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(`div`,{className:`h-4 w-px bg-slate-600`}),(0,L.jsxs)(`button`,{onClick:_,className:`flex items-center gap-2 text-slate-300 hover:text-white transition-colors min-h-[44px] px-2 -mx-2 rounded`,children:[(0,L.jsx)(p,{className:`h-4 w-4 flex-shrink-0`,strokeWidth:2}),(0,L.jsxs)(`span`,{children:[(0,L.jsx)(`span`,{className:`font-semibold text-white`,children:`Nearest`}),(0,L.jsxs)(`span`,{className:`text-xs text-slate-400 ml-1`,children:[`(`,D.length,`)`]})]})]})]})]}),a>0&&(0,L.jsxs)(V,{open:C,onOpenChange:w,children:[(0,L.jsx)(H,{asChild:!0,children:(0,L.jsxs)(B,{variant:`secondary`,size:`sm`,className:`lg:hidden`,children:[(0,L.jsx)(r,{className:`h-4 w-4`,strokeWidth:2}),(0,L.jsx)(`span`,{className:`hidden sm:inline`,children:`Stats`})]})}),(0,L.jsxs)(U,{align:`start`,className:`w-72`,children:[(0,L.jsx)(K,{children:`Map Statistics`}),(0,L.jsx)(q,{}),d&&(0,L.jsxs)(W,{onClick:k,className:`flex-col items-start py-3`,children:[(0,L.jsxs)(`div`,{className:`flex items-center gap-2 mb-1`,children:[(0,L.jsx)(c,{className:`h-4 w-4 text-slate-400`,strokeWidth:2}),(0,L.jsx)(`span`,{className:`font-medium`,children:`Map Center`})]}),(0,L.jsxs)(`span`,{className:`font-mono text-xs text-slate-400 ml-6`,children:[d.lat.toFixed(6),`°,`,` `,d.lng.toFixed(6),`°`]}),(0,L.jsx)(`span`,{className:`text-xs text-slate-500 ml-6 mt-1`,children:`Tap to copy`})]}),(0,L.jsxs)(W,{className:`flex-col items-start py-3`,children:[(0,L.jsxs)(`div`,{className:`flex items-center gap-2 mb-1`,children:[(0,L.jsx)(ae,{className:`h-4 w-4 text-slate-400`,strokeWidth:2}),(0,L.jsx)(`span`,{className:`font-medium`,children:`Zoom Level`})]}),(0,L.jsxs)(`span`,{className:`text-sm text-slate-400 ml-6`,children:[Math.round(u),`x •`,` `,u<5?`Continent view`:u<10?`State/Region view`:u<15?`City view`:`Street view`]})]}),(0,L.jsxs)(W,{className:`flex-col items-start py-3`,children:[(0,L.jsxs)(`div`,{className:`flex items-center gap-2 mb-1`,children:[(0,L.jsx)(r,{className:`h-4 w-4 text-slate-400`,strokeWidth:2}),(0,L.jsx)(`span`,{className:`font-medium`,children:`Visible Locations`})]}),(0,L.jsx)(`span`,{className:`text-sm text-slate-400 ml-6`,children:o.toLocaleString()})]}),D.length>0&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(q,{}),(0,L.jsxs)(W,{onClick:()=>{w(!1),_?.()},className:`flex items-center gap-2 py-3`,children:[(0,L.jsx)(p,{className:`h-4 w-4`,strokeWidth:2}),(0,L.jsx)(`span`,{className:`font-medium`,children:`View Nearest Locations`}),(0,L.jsxs)(`span`,{className:`ml-auto text-sm text-slate-400`,children:[`(`,D.length,`)`]})]})]})]})]})]}),(0,L.jsxs)(`div`,{className:`flex gap-2 sm:gap-3 items-center`,children:[(0,L.jsxs)(B,{variant:`default`,size:`sm`,onClick:e,className:`flex items-center gap-2`,children:[(0,L.jsx)(f,{className:`h-4 w-4`,strokeWidth:2}),(0,L.jsx)(`span`,{className:`hidden sm:inline`,children:`Find My Location`})]}),t?(0,L.jsxs)(V,{children:[(0,L.jsx)(H,{asChild:!0,children:(0,L.jsxs)(B,{variant:`secondary`,size:`sm`,children:[(0,L.jsx)(j,{className:`h-4 w-4`,strokeWidth:2}),(0,L.jsx)(`span`,{className:`hidden sm:inline text-sm`,children:t.displayName||`Guest`})]})}),(0,L.jsxs)(U,{align:`end`,children:[(0,L.jsx)(K,{children:t.email||`Anonymous`}),(0,L.jsx)(q,{}),(0,L.jsxs)(W,{onClick:O,children:[(0,L.jsx)(l,{className:`h-4 w-4`,strokeWidth:2}),`Sign Out`]})]})]}):(0,L.jsxs)(B,{variant:`secondary`,size:`sm`,onClick:()=>S(!0),children:[(0,L.jsx)(j,{className:`h-4 w-4 sm:hidden`,strokeWidth:2}),(0,L.jsx)(`span`,{className:`hidden sm:inline`,children:`Sign In`})]}),(0,L.jsxs)(V,{children:[(0,L.jsx)(H,{asChild:!0,children:(0,L.jsx)(B,{variant:`secondary`,size:`sm`,children:(0,L.jsx)(s,{className:`h-4 w-4`,strokeWidth:2})})}),(0,L.jsxs)(U,{align:`end`,children:[(0,L.jsx)(K,{children:`Map Theme`}),(0,L.jsx)(q,{}),(0,L.jsxs)(Re,{value:n,onValueChange:e=>i(e),children:[(0,L.jsxs)(G,{value:`LIGHT`,children:[(0,L.jsx)(h,{className:`h-4 w-4 mr-2`,strokeWidth:2}),`Light`]}),(0,L.jsxs)(G,{value:`DARK`,children:[(0,L.jsx)(y,{className:`h-4 w-4 mr-2`,strokeWidth:2}),`Dark`]}),(0,L.jsxs)(G,{value:`FOLLOW_SYSTEM`,children:[(0,L.jsx)(ge,{className:`h-4 w-4 mr-2`,strokeWidth:2}),`System`]})]})]})]})]})]})})}),(0,L.jsx)(I.Suspense,{fallback:null,children:(0,L.jsx)(Je,{open:x,onClose:()=>S(!1)})})]})}var Xe=({...e})=>(0,L.jsx)(Oe,{theme:`light`,className:`toaster group`,closeButton:!0,icons:{success:(0,L.jsx)(ue,{className:`h-4 w-4`}),info:(0,L.jsx)(w,{className:`h-4 w-4`}),warning:(0,L.jsx)(m,{className:`h-4 w-4`}),error:(0,L.jsx)(u,{className:`h-4 w-4`}),loading:(0,L.jsx)(S,{className:`h-4 w-4 animate-spin`}),close:(0,L.jsx)(n,{className:`h-4 w-4`})},toastOptions:{classNames:{toast:`group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg`,description:`group-[.toast]:text-muted-foreground`,actionButton:`group-[.toast]:bg-primary group-[.toast]:text-primary-foreground`,cancelButton:`group-[.toast]:bg-muted group-[.toast]:text-muted-foreground`,closeButton:`group-[.toast]:!left-auto group-[.toast]:!right-[-5px] group-[.toast]:!top-[10px] group-[.toast]:bg-background group-[.toast]:!border-none group-[.toast]:hover:bg-muted group-[.toast]:text-foreground`}},...e});function Ze(){let[e,t]=(0,I.useState)([]),[n,r]=(0,I.useState)(!0),[i,a]=(0,I.useState)(null);return(0,I.useEffect)(()=>{async function e(){try{let e=await fetch(`/poke-vm-map/data/pokemon-vms.geojson`);if(!e.ok)throw Error(`Failed to fetch: ${e.statusText}`);t((await e.json()).features.map((e,t)=>{let[n,r]=e.geometry.coordinates,{Retailer:i,Address:a}=e.properties;return{id:`vm-${t}`,name:`Pokemon Vending Machine`,location:{lat:r,lng:n},address:a,createdBy:`system`,createdAt:P.now(),lastUpdated:P.now(),verified:!0,retailer:i}})),r(!1)}catch(e){console.error(`Failed to fetch GeoJSON:`,e),a(e),r(!1)}}e()},[]),{pins:e,loading:n,error:i}}function Qe(){let[e,n]=(0,I.useState)(()=>localStorage.getItem(`mapColorScheme`)||`FOLLOW_SYSTEM`),[r,i]=(0,I.useState)(t.LIGHT);return(0,I.useEffect)(()=>{if(localStorage.setItem(`mapColorScheme`,e),e===`LIGHT`)i(t.LIGHT);else if(e===`DARK`)i(t.DARK);else{let e=window.matchMedia(`(prefers-color-scheme: dark)`).matches;i(e?t.DARK:t.LIGHT)}},[e]),(0,I.useEffect)(()=>{if(e===`FOLLOW_SYSTEM`){let e=window.matchMedia(`(prefers-color-scheme: dark)`),n=e=>{i(e.matches?t.DARK:t.LIGHT)};return e.addEventListener(`change`,n),()=>e.removeEventListener(`change`,n)}},[e]),{preference:e,effectiveScheme:r,setPreference:n}}function $e(){let[e,t]=(0,I.useState)({leftPanel:{isOpen:!1,activeContent:null},rightPanel:{isOpen:!1,activeContent:null,isLoading:!1}});return[e,{openLeftPanel:(0,I.useCallback)(e=>{t(t=>({...t,leftPanel:{isOpen:!0,activeContent:e}}))},[]),closeLeftPanel:(0,I.useCallback)(()=>{t(e=>({...e,leftPanel:{...e.leftPanel,isOpen:!1}}))},[]),toggleLeftPanel:(0,I.useCallback)(e=>{t(t=>({...t,leftPanel:{isOpen:t.leftPanel.activeContent===e?!t.leftPanel.isOpen:!0,activeContent:e}}))},[]),openRightPanel:(0,I.useCallback)((e,n)=>{t(t=>({...t,rightPanel:{isOpen:!0,activeContent:n,locationId:e,isLoading:!0}}))},[]),closeRightPanel:(0,I.useCallback)(()=>{t(e=>({...e,rightPanel:{...e.rightPanel,isOpen:!1}}))},[]),updateRightPanelContent:(0,I.useCallback)(e=>{t(t=>({...t,rightPanel:{...t.rightPanel,activeContent:e}}))},[])}]}var et=(0,I.lazy)(()=>$(()=>import(`./LeftPanel-uRkWecRJ.js`),__vite__mapDeps([6,2,3,4])).then(e=>({default:e.LeftPanel}))),tt=(0,I.lazy)(()=>$(()=>import(`./RightPanel-DpplF059.js`),__vite__mapDeps([7,2,3,4])).then(e=>({default:e.RightPanel}))),nt=(0,I.lazy)(()=>$(()=>import(`./NearestLocations-UEF6vIP9.js`),__vite__mapDeps([8,2,3])).then(e=>({default:e.NearestLocations})));function rt(){let[e,t]=(0,I.useState)({lat:39.8283,lng:-98.5795}),[n,r]=(0,I.useState)({lat:39.8283,lng:-98.5795}),[i,a]=(0,I.useState)(5),[o,s]=(0,I.useState)(null),[c,l]=(0,I.useState)(5),[u,d]=(0,I.useState)(0),[f,p]=(0,I.useState)(null),[m,h]=(0,I.useState)(0),{pins:g,loading:_,error:v}=Ze(),{user:y,loading:b}=Q(),{preference:x,effectiveScheme:S,setPreference:C}=Qe(),[w,T]=$e(),E=e=>{let n=g.find(t=>t.id===e);n&&(t(n.location),a(15),p(e))};return(0,I.useEffect)(()=>{let e=e=>{e.key===`Escape`&&(w.rightPanel.isOpen?T.closeRightPanel():w.leftPanel.isOpen&&T.closeLeftPanel()),(e.metaKey||e.ctrlKey)&&e.key===`n`&&(e.preventDefault(),T.toggleLeftPanel(`nearest`))};return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)},[w,T]),b?(0,L.jsx)(`div`,{className:`flex items-center justify-center h-screen`,children:(0,L.jsx)(`div`,{className:`text-lg`,children:`Loading...`})}):v?(0,L.jsxs)(`div`,{className:`flex flex-col items-center justify-center h-screen gap-4`,children:[(0,L.jsx)(`div`,{className:`text-xl text-red-600`,children:`Failed to load vending machine data`}),(0,L.jsx)(`div`,{className:`text-sm text-gray-600`,children:v.message}),(0,L.jsx)(`button`,{onClick:()=>window.location.reload(),className:`px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600`,children:`Retry`})]}):(0,L.jsxs)(`div`,{style:{width:`100%`,height:`100%`,display:`flex`,flexDirection:`column`},children:[(0,L.jsx)(Ye,{onLocateUser:async()=>{if(p(null),`geolocation`in navigator){let e=F.loading(`Finding your location...`,{id:`find-location`});navigator.geolocation.getCurrentPosition(n=>{F.dismiss(e);let r={lat:n.coords.latitude,lng:n.coords.longitude};s(r),t(r),a(13),h(e=>e+1),F.success(`Location found`,{id:`location-found`,description:`Map centered on your location`})},async n=>{if(console.error(`Error getting location:`,n),n.code===2)try{console.log(`Trying IP-based geolocation fallback...`),F.dismiss(e);let n=F.loading(`Trying IP-based location...`,{id:`find-location-ip`}),r=await(await fetch(`https://ipapi.co/json/`)).json();if(r.latitude&&r.longitude){F.dismiss(n);let e={lat:r.latitude,lng:r.longitude};s(e),t(e),a(12),h(e=>e+1),F.success(`Located in ${r.city}, ${r.region}`,{id:`location-found`,description:`Using IP-based location (approximate)`});return}F.dismiss(n)}catch(e){console.error(`IP geolocation fallback failed:`,e)}F.dismiss(e);let r=``;switch(n.code){case 1:r=`Please allow location access in your browser settings.`;break;case 2:r=`Location unavailable. Check Location Services in System Settings.`;break;case 3:r=`Location request timed out. Please try again.`;break;default:r=`An unknown error occurred.`}F.error(`Unable to get your location`,{id:`location-error`,description:r})},{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e4})}else F.error(`Geolocation not supported`,{id:`geolocation-unsupported`,description:`Your browser does not support geolocation`})},user:y,mapColorScheme:x,onMapColorSchemeChange:C,totalPins:g.length,visiblePins:u,currentZoom:c,mapCenter:n,userLocation:o,pins:g,onPinSelect:E,onOpenNearestPanel:()=>T.openLeftPanel(`nearest`),maxNearestLocations:25,maxNearestDistance:50}),_&&(0,L.jsx)(`div`,{className:`absolute top-20 left-1/2 transform -translate-x-1/2 z-[1001] bg-white px-4 py-2 rounded-lg shadow-lg`,children:(0,L.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,L.jsx)(`div`,{className:`animate-spin h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full`}),(0,L.jsxs)(`span`,{className:`text-sm font-medium`,children:[`Loading `,g.length>0?`${g.length}`:``,` Pokemon vending machines...`]})]})}),(0,L.jsx)(Ie,{apiKey:`AIzaSyCSUvdVpJq8WvGZrEiececGFYSBfinMcH4`,center:e,zoom:i,pins:g,pinsLoading:_,userLocation:o,colorScheme:S,onZoomChange:l,onVisiblePinsChange:d,onCenterChange:r,onOpenDetails:e=>T.openRightPanel(e,`location-details`),selectedPinId:f,onPinSelectionChange:p,locationPulseTrigger:m}),(0,L.jsx)(I.Suspense,{fallback:null,children:(0,L.jsx)(et,{isOpen:w.leftPanel.isOpen,activeContent:w.leftPanel.activeContent,onClose:T.closeLeftPanel,children:w.leftPanel.activeContent===`nearest`&&o&&(0,L.jsx)(nt,{userLocation:o,pins:g,onPinSelect:E,onClose:T.closeLeftPanel,maxResults:25,maxDistance:50})})}),(0,L.jsx)(I.Suspense,{fallback:null,children:(0,L.jsx)(tt,{isOpen:w.rightPanel.isOpen,activeContent:w.rightPanel.activeContent,locationId:w.rightPanel.locationId,isLoading:w.rightPanel.isLoading,onClose:T.closeRightPanel,children:w.rightPanel.locationId&&(0,L.jsxs)(`div`,{className:`p-4`,children:[(0,L.jsxs)(`p`,{className:`text-slate-300`,children:[`Details for location: `,w.rightPanel.locationId]}),(0,L.jsx)(`p`,{className:`text-slate-400 text-sm mt-2`,children:`Extended location details will be implemented in Phase 3`})]})})}),(0,L.jsx)(Xe,{position:`bottom-center`})]})}var it=rt;(0,ke.createRoot)(document.getElementById(`root`)).render((0,L.jsx)(I.StrictMode,{children:(0,L.jsx)(it,{})}));export{B as n,z as r,Q as t};