import{n as e}from"./rolldown-runtime-y2wrX6ue.js";import{A as t,X as n,a as r,at as i,c as a,i as o,n as s,o as c,r as l,s as u,t as d}from"./react-vendor-ZjqdYyzx.js";import"./vendor-B131Y2xX.js";import"./firebase-vendor-BRal2sr7.js";import{n as f}from"./ui-vendor-BsUxY6oW.js";import{n as p,r as m,t as h}from"./index-ClmXECPO.js";var g=e(i(),1),_=n(),v=c,y=r,b=g.forwardRef(({className:e,...t},n)=>(0,_.jsx)(o,{ref:n,className:m(`fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0`,e),...t}));b.displayName=o.displayName;var x=g.forwardRef(({className:e,children:n,...r},i)=>(0,_.jsxs)(y,{children:[(0,_.jsx)(b,{}),(0,_.jsxs)(s,{ref:i,className:m(`fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg`,e),...r,children:[n,(0,_.jsxs)(d,{className:`absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground`,children:[(0,_.jsx)(t,{className:`h-4 w-4`}),(0,_.jsx)(`span`,{className:`sr-only`,children:`Close`})]})]})]}));x.displayName=s.displayName;var S=({className:e,...t})=>(0,_.jsx)(`div`,{className:m(`flex flex-col space-y-1.5 text-center sm:text-left`,e),...t});S.displayName=`DialogHeader`;var C=({className:e,...t})=>(0,_.jsx)(`div`,{className:m(`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2`,e),...t});C.displayName=`DialogFooter`;var w=g.forwardRef(({className:e,...t},n)=>(0,_.jsx)(u,{ref:n,className:m(`text-lg font-semibold leading-none tracking-tight`,e),...t}));w.displayName=u.displayName;var T=g.forwardRef(({className:e,...t},n)=>(0,_.jsx)(l,{ref:n,className:m(`text-sm text-muted-foreground`,e),...t}));T.displayName=l.displayName;function E({open:e,onClose:t}){let{signIn:n,signUp:r,signInAnon:i}=h(),[a,o]=(0,g.useState)(!1),[s,c]=(0,g.useState)(``),[l,u]=(0,g.useState)(``),[d,m]=(0,g.useState)(!1);return(0,_.jsx)(v,{open:e,onOpenChange:t,children:(0,_.jsxs)(x,{className:`sm:max-w-md`,children:[(0,_.jsxs)(S,{children:[(0,_.jsx)(w,{children:a?`Create Account`:`Sign In`}),(0,_.jsx)(T,{children:a?`Create an account to update the map`:`Sign in to contribute to PokeMap`})]}),(0,_.jsxs)(`form`,{onSubmit:async e=>{e.preventDefault(),m(!0);try{a?(await r(s,l),f.success(`Account created!`,{description:`Welcome to PokeMap`})):(await n(s,l),f.success(`Signed in successfully!`)),t(),c(``),u(``)}catch(e){f.error(a?`Sign up failed`:`Sign in failed`,{description:e.message})}finally{m(!1)}},className:`space-y-4`,children:[(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`label`,{className:`block text-sm font-medium mb-1`,children:`Email`}),(0,_.jsx)(`input`,{type:`email`,value:s,onChange:e=>c(e.target.value),className:`w-full px-3 py-2 border rounded-md`,placeholder:`your@email.com`,required:!0})]}),(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`label`,{className:`block text-sm font-medium mb-1`,children:`Password`}),(0,_.jsx)(`input`,{type:`password`,value:l,onChange:e=>u(e.target.value),className:`w-full px-3 py-2 border rounded-md`,placeholder:`••••••••••`,required:!0,minLength:6})]}),(0,_.jsx)(p,{type:`submit`,className:`w-full`,disabled:d,children:d?`Loading...`:a?`Create Account`:`Sign In`})]}),(0,_.jsxs)(`div`,{className:`relative`,children:[(0,_.jsx)(`div`,{className:`absolute inset-0 flex items-center`,children:(0,_.jsx)(`span`,{className:`w-full border-t`})}),(0,_.jsx)(`div`,{className:`relative flex justify-center text-xs uppercase`,children:(0,_.jsx)(`span`,{className:`bg-background px-2 text-muted-foreground`,children:`Or`})})]}),(0,_.jsx)(p,{variant:`outline`,onClick:async()=>{m(!0);try{await i(),f.success(`Signed in anonymously`),t()}catch(e){f.error(`Anonymous sign in failed`,{description:e.message})}finally{m(!1)}},disabled:d,className:`w-full`,children:`Continue as Guest`}),(0,_.jsxs)(`div`,{className:`text-center text-sm`,children:[a?`Already have an account?`:`Don't have an account?`,` `,(0,_.jsx)(`button`,{type:`button`,onClick:()=>o(!a),className:`text-primary hover:underline`,children:a?`Sign in`:`Sign up`})]})]})})}export{E as AuthDialog};